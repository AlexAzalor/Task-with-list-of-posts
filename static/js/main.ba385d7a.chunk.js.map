{"version":3,"sources":["api/posts.ts","components/PostsList/PostListForm.tsx","components/PostsList/PostsList.tsx","api/comments.ts","components/NewCommentForm/NewCommentForm.tsx","components/PostDetails/PostDetails.tsx","App.tsx","index.tsx"],"names":["API_URL","loadPosts","a","fetch","response","json","loadPostDetails","id","deletePost","method","addPost","title","body","headers","JSON","stringify","updatePost","PostListForm","setPostId","setIdUpdatePost","getPosts","useState","addTitle","setAddTitle","addBody","setAddBody","handleDeletePost","postId","handle","event","preventDefault","className","onSubmit","type","value","onChange","target","placeholder","onClick","PostsList","handleButtonDetails","posts","setPosts","idUpdatePost","postsFromServer","handleSubmitPost","useEffect","name","map","post","loadComments","deleteComment","addComment","NewCommentForm","getComments","setBody","handleSubmit","PostDetails","postDetails","setPostDetails","comments","setComments","getPostDetails","detailsFromServer","commentsFromServer","handleDeleteComment","commentary","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ba385d7a.chunk.js","sourcesContent":["export const API_URL = 'https://bloggy-api.herokuapp.com';\n\nexport const loadPosts = async (): Promise<[]> => {\n  const response = await fetch(`${API_URL}/posts`);\n\n  return response.json();\n};\n\nexport const loadPostDetails = async (id: number) => {\n  const response = await fetch(`${API_URL}/posts/${id}?_embed=comments`);\n\n  return response.json();\n};\n\nexport const deletePost = async (id: number) => {\n  const response = await fetch(`${API_URL}/posts/${id}`, {\n    method: 'DELETE',\n  });\n\n  return response.json();\n};\n\nexport const addPost = async (\n  title: string,\n  body: string,\n) => {\n  const response = await fetch(`${API_URL}/posts`, {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      title,\n      body,\n    }),\n  });\n\n  return response.json();\n};\n\nexport const updatePost = async (\n  id: number,\n  title: string,\n  body: string,\n) => {\n  const response = await fetch(`${API_URL}/posts/${id}`, {\n    method: 'PUT',\n    headers: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      title,\n      body,\n    }),\n  });\n\n  return response.json();\n};\n","import React, { useState } from 'react';\nimport { deletePost, updatePost } from '../../api/posts';\n\ntype Props = {\n  id: number;\n  setPostId: React.Dispatch<React.SetStateAction<number>>;\n  setIdUpdatePost: React.Dispatch<React.SetStateAction<number>>;\n  getPosts: () => Promise<void>;\n};\n\nexport const PostListForm: React.FC<Props> = ({\n  id,\n  setPostId,\n  setIdUpdatePost,\n  getPosts,\n}) => {\n  const [addTitle, setAddTitle] = useState('');\n  const [addBody, setAddBody] = useState('');\n\n  const handleDeletePost = async (postId: number) => {\n    await deletePost(postId);\n    await getPosts();\n  };\n\n  const clearFields = () => {\n    setAddTitle('');\n    setAddBody('');\n  };\n\n  const handle = async (event: React.FormEvent) => {\n    event.preventDefault();\n\n    await updatePost(id, addTitle, addBody);\n    await getPosts();\n\n    clearFields();\n  };\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={handle}\n    >\n      <input\n        type=\"hidden\"\n        value={id}\n        onChange={(event) => setPostId(+event.target.value)}\n      />\n\n      <input\n        type=\"text\"\n        placeholder=\"Type title\"\n        value={addTitle}\n        onChange={event => setAddTitle(event.target.value)}\n      />\n\n      <textarea\n        className=\"NewCommentForm__input\"\n        placeholder=\"Type text\"\n        value={addBody}\n        onChange={event => setAddBody(event.target.value)}\n      />\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n        onClick={() => setIdUpdatePost(id)}\n      >\n        Update post\n      </button>\n\n      <button\n        type=\"button\"\n        className=\"PostsList__button PostsList__button--red button\"\n        onClick={() => handleDeletePost(id)}\n      >\n        Remove post\n      </button>\n    </form>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport './PostsList.scss';\n\nimport { addPost, loadPosts, updatePost } from '../../api/posts';\nimport { PostListForm } from './PostListForm';\n\ntype Props = {\n  handleButtonDetails: (id: number) => void;\n  postId: number;\n  setPostId: React.Dispatch<React.SetStateAction<number>>;\n};\n\nexport const PostsList: React.FC<Props> = ({ handleButtonDetails, postId, setPostId }) => {\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [addBody, setAddBody] = useState('');\n  const [addTitle, setAddTitle] = useState('');\n  const [idUpdatePost, setIdUpdatePost] = useState(0);\n\n  const getPosts = async () => {\n    const postsFromServer = await loadPosts();\n\n    setPosts(postsFromServer);\n  };\n\n  const clearFields = () => {\n    setAddTitle('');\n    setAddBody('');\n  };\n\n  const handleSubmitPost = async (event: React.FormEvent) => {\n    event.preventDefault();\n\n    await addPost(addTitle, addBody);\n    await updatePost(idUpdatePost, addTitle, addBody);\n    await getPosts();\n\n    clearFields();\n  };\n\n  useEffect(() => {\n    getPosts();\n  }, [idUpdatePost]);\n\n  return (\n    <div className=\"PostsList\">\n      <h2>Posts:</h2>\n      <form\n        className=\"NewCommentForm\"\n        onSubmit={handleSubmitPost}\n      >\n        <input\n          type=\"text\"\n          value={addTitle}\n          name=\"title\"\n          onChange={event => setAddTitle(event.target.value)}\n        />\n\n        <textarea\n          className=\"NewCommentForm__input\"\n          name=\"body\"\n          value={addBody}\n          onChange={event => setAddBody(event.target.value)}\n        />\n\n        <button\n          type=\"submit\"\n          className=\"NewCommentForm__submit-button button\"\n          onClick={handleSubmitPost}\n        >\n          Add a post\n        </button>\n      </form>\n\n      <ul className=\"PostsList__list\">\n        {posts.map(post => (\n          <li key={post.id} className=\"PostsList__item\">\n            <div>\n              <h3>{post.title}</h3>\n              <p>{post.body}</p>\n            </div>\n\n            <div className=\"PostsList__form\">\n              {postId === post.id ? (\n                <button\n                  type=\"button\"\n                  className=\"PostsList__button button\"\n                  onClick={() => handleButtonDetails(0)}\n                >\n                  Close details\n                </button>\n              ) : (\n                <button\n                  type=\"button\"\n                  className=\"PostsList__button button\"\n                  onClick={() => handleButtonDetails(post.id)}\n                >\n                  Open details\n                </button>\n              )}\n\n              <PostListForm\n                getPosts={getPosts}\n                setPostId={setPostId}\n                setIdUpdatePost={setIdUpdatePost}\n                id={post.id}\n              />\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","export const API_URL = 'https://bloggy-api.herokuapp.com';\n\nexport const loadComments = async (id: number) => {\n  const response = await fetch(`${API_URL}/posts/${id}?_embed=comments`);\n\n  return response.json();\n};\n\nexport const deleteComment = async (id: number) => {\n  const response = await fetch(`${API_URL}/comments/${id}?_embed=comments`, {\n    method: 'DELETE',\n  });\n\n  return response.json();\n};\n\nexport const addComment = async (\n  postId: number,\n  body: string,\n): Promise<Comments> => {\n  const response = await fetch(`${API_URL}/comments`, {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      postId,\n      body,\n    }),\n  });\n\n  return response.json();\n};\n","import React, { useState } from 'react';\nimport './NewCommentForm.scss';\n\nimport { addComment } from '../../api/comments';\n\ntype Props = {\n  postId: number;\n  getComments: () => Promise<void>;\n};\n\nexport const NewCommentForm: React.FC<Props> = ({ postId, getComments }) => {\n  const [body, setBody] = useState('');\n\n  const clearField = () => {\n    setBody('');\n  };\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n\n    await addComment(postId, body);\n    await getComments();\n\n    clearField();\n  };\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={handleSubmit}\n    >\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          value={body}\n          onChange={event => setBody(event.target.value)}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n        onClick={handleSubmit}\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport './PostDetails.scss';\n\nimport { loadPostDetails } from '../../api/posts';\nimport { deleteComment, loadComments } from '../../api/comments';\n\nimport { NewCommentForm } from '../NewCommentForm';\n\ntype Props = {\n  postId: number;\n};\n\nexport const PostDetails: React.FC<Props> = ({ postId }) => {\n  const [postDetails, setPostDetails] = useState<Post | null>();\n  const [comments, setComments] = useState<Comments[]>([]);\n\n  const getPostDetails = async () => {\n    const detailsFromServer = await loadPostDetails(postId);\n\n    setPostDetails(detailsFromServer);\n  };\n\n  const getComments = async () => {\n    const commentsFromServer = await loadComments(postId);\n\n    setComments(commentsFromServer.comments);\n  };\n\n  const handleDeleteComment = async (id: number) => {\n    await deleteComment(id);\n    await getComments();\n  };\n\n  useEffect(() => {\n    getComments();\n    getPostDetails();\n  }, [postId]);\n\n  return (\n    <div className=\"PostDetails\">\n      <h2>Post details:</h2>\n\n      <section className=\"PostDetails__post\">\n        <p>{postDetails?.title}</p>\n      </section>\n\n      <section className=\"PostDetails__comments\">\n\n        <ul className=\"PostDetails__list\">\n          {comments.map(commentary => (\n            <li key={commentary.id} className=\"PostDetails__list-item\">\n              <button\n                type=\"button\"\n                className=\"PostDetails__remove-button button\"\n                onClick={() => handleDeleteComment(commentary.id)}\n              >\n                X\n              </button>\n              <p>{commentary.body}</p>\n            </li>\n          ))}\n        </ul>\n      </section>\n\n      <section>\n        <div className=\"PostDetails__form-wrapper\">\n          <NewCommentForm\n            postId={postId}\n            getComments={getComments}\n          />\n        </div>\n      </section>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\n\nconst App: React.FC = () => {\n  const [postId, setPostId] = useState(0);\n\n  const handleButtonDetails = (id: number) => {\n    setPostId(id);\n  };\n\n  return (\n    <div className=\"App\">\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            handleButtonDetails={handleButtonDetails}\n            postId={postId}\n            setPostId={setPostId}\n          />\n        </div>\n\n        <div className=\"App__content\">\n          {postId ? (\n            <PostDetails\n              postId={postId}\n            />\n          ) : ''}\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}